\apendice{Plan de Proyecto Software}

\section{Introducción}
En este apartado trabajaremos sobre la planificación del proyecto, de tal manera que se pueda definir, identificar y programar las actividades específicas que se requieren para realizar las tareas del mismo. 

La evolución temporal es una de las partes más importantes de todo el proceso de desarrollo, ya que una mala planificación, puede hacer que el proyecto sufra retrasos, de tal manera, que no se llegue a la fecha de entrega prevista, lo que supone un coste, en este caso, el suspenso, pero también el económico, por las horas y recursos destinados a tal fin.

 En esta fase es muy importante que para cada una de las tareas, sepamos el tiempo que durará aproximadamente, quien es el encargado de hacer la tarea y el dinero que supone hacerla. Por lo que invertir tiempo en la estimación de las horas cada una de las tareas, ayuda a identificar las irregularidades en el futuro.

La viabilidad pone el foco en el coste económico del proyecto como de la parte legal. Es decir, es un reactivo limitante, sobre todo el coste.

\section{Planificación temporal}
El método de trabajo para hacer el seguimiento y la planificación del mismo es \emph{Scrum}, que pretende realizar una gestión ágil del proyecto. Se basa en \emph{spints}, la duración de estos suele rondar entre los siete y quince días. Dependiendo de los requisitos del proyecto, número de integrantes y del tiempo disponible, se maneja esta horquilla temporal, en mi caso por la falta de tiempo, decidí hacerlos de 5 días. 

Estos \emph{sprints} se basan en una reunión, donde se planifican todas las tareas que se tiene como objetivo realizar, en mi caso eran las reuniones eran los tutores del trabajo de fin de grado. Además cada día se tiene que hacer el \emph{daily meetting}, pero como el proyecto es unipersonal, no es necesario. Por lo que se puede afirmar que se ha seguido la filosofía ágil.

Aclarar que la estimación del tiempo se realiza mediante los \emph{story points}, que indican la complejidad de la tarea a realizar. Esta herramienta nos la aporta ZenHub, con la siguiente relación según el coste temporal, que podemos ver en la siguiente tabla~\ref{tabla:storypoint}

\begin{table}[H]
	\centering
	\rowcolors {2}{gray!35}{}
	\begin{tabular}{l l }
		\toprule
		{Story Points} & Estimación temporal \\
		1            & 1 hora              \\ 
		2            & 2 horas           \\ 
		3            & 3 horas             \\ 
		4            & 4 horas           \\ 
		5            & 5 horas             \\ 
		6            & 6 horas           \\ 
		7            & 7 horas             \\ 
		8            & 8 horas             \\ 
		9            & 9 horas             \\ \bottomrule
	\end{tabular}
	\caption{Equivalencias \emph{Story Points} y tiempo estimado}
	\label{tabla:storypoint}
\end{table}

A continuación se detallan cada uno de los \emph{sprints} realizados durante el proyecto:

\subsection{Sprint 1 (22/06/20 - 26/06/20)}\label{sprint-2-220620---260620}

El inicio del proyecto fue a través de correo, explicando la situación a mis tutores, de que lo que estaba haciendo no me funcionaba, que estaba verde y que si cabía la posibilidad de hacer otro trabajo. Me dieron el visto bueno, pero que tenía que hacer algo diferenciador, ya que no vale cualquier cosa. Por lo que en la reunión de cierre de \emph{sprint} se comentaría como centrar la aplicación. 

Entonces debido a la escasez temporal, me decido a hacer una aplicación en \emph{Flutter}, ya que se puede hacer algo de calidad de manera ágil.

Los objetivos en este \emph{sprint} inicial fueron:

\begin{itemize}
\item Documentar como hacer aplicaciones en \emph{Flutter}.
\item Cursar un curso en \href{https://www.udemy.com/course/flutter-primeros-pasos/}{Udemy}
\item Crear el repositorio.
\item Implementar el cuerpo de la aplicación.
\item Investigar sobre \emph{apis} que ofrece el \emph{framework}.
\end{itemize}

Todas las \emph{issues} realizadas para este \emph{sprint}, están disponibles en \href{https://github.com/scc0034/flutter_serpiente/milestone/1?closed=1}{Sprint 1}

La estimación fue de 54 horas, pero que finalmente se destinaron 45,5 horas, debido en gran parte a la reutilización de código del curso, aunque el curso me duró más de lo estimado.

\imagen{burndowns/sp1.png}{Sprint 1.}

%%% SPRINT 2
\subsection{Sprint 2 (27/06/20 - 01/07/20)}\label{sprint-1-270620---010720}
En este segundo incremento de la aplicación, definimos que el proyecto iba a ser una colección de juegos, que podría usarse como \emph{portfolio}, por lo que los juegos eran nada más que el hilo conductor para tocar el mayor número de herramientas posible. 

Los objetivos planteados fueron:
\begin{itemize}
	\item Persistencia de datos, con base de datos local.
	\item Conectar con firebase para usar la base de datos que proporciona.
	\item Formulario para recoger las puntuaciones de los jugadores.
	\item Hacer la ventana que muestra el ranking de los jugadores.
	\item Avanzar de manera significativa en la memoria.
	\item Mejorar el juego del snake.
	\item Implementar la api de login de firebase, mediante Google.
	\item Google Ad mobile.
\end{itemize}

Las diferentes \emph{issues} planificadas están en \href{https://github.com/scc0034/flutter_serpiente/milestone/2?closed=1}{Sprint 2}

\imagen{burndowns/sp2.png}{Sprint 2.}

En la reunión del cierre del seguimiento del sprint se muestra la \href{https://github.com/scc0034/flutter_serpiente/releases/tag/V.2.0.0/}{v.2.0.0}, viendo que los objetivos propuesto para este \emph{sprint} se han logrado a excepción de los anuncios, que por diversos motivos no se muestran.
 	
Se estimaron unas 53 horas, pero se acabaron destinando 45 horas que dieron para completar las tareas.

%%%SPRINT 3
\subsection{Sprint 3 (02/07/20 - 06/07/20)}\label{sprint-3-020720---070720}
En esta iteración de la aplicación se debía de añadir un juego más para que tenga sentido como una colección de juegos. Se me propuso una idea de juego, que consistía en mover unas tuberías de agua hasta cerrar un circuito. Descarte esa opción a medida que podía explotar la funcionalidad de tener una base de datos en tiempo real, por lo que el juego, al final, fue el cuatro en raya online. Además de la mejora constante del producto.

Los objetivos planificados fueron:
\begin{itemize}
	\item Añadir sonidos y música al juego del snake.
	\item Funcionalidad de las tuberías en el snake.
	\item Controlar que si hay mejora de puntuación para cada usuario en el snake, pueden hacer un submit con la nueva puntuación.
	\item Añadir imágenes de medallas al ranking.
	\item Solucionar el problema de funcionamiento de los anuncios.
	\item Mejorar el rendimiento del conjunto.
	\item Crear la interfaz de conexión del cuatro en raya con la base de datos.
	\item Crear la primera estructura del juego cuatro en raya.
	\item Realizar las pruebas necesarias para un despliegue de la aplicación en entorno web.
	\item Solucionar algunos problemas de la play store.
	\item Continuar con la memoria y anexos.
\end{itemize}

Las diferentes \emph{issues} se encuentran en \href{https://github.com/scc0034/flutter_serpiente/milestone/3?closed=1}{Sprint 3}

\imagen{burndowns/sp3.png}{Sprint 3.}

Al final en la reunión del cierre de este \emph{Sprint}, con los tutores, quedaba claro que gran parte de las tareas fueron completadas. En cuanto al tema del juego, no se puedo hacer más que la estructura del mismo, pero que para el siguiente, debería de quedar terminado.

En cuanto a las horas que planifique para la documentación de la memoria, solo hice el 17\% de las 12 horas que me propuse. En gran parte fue debido a que destiné algunas más horas a otras tareas o que soy demasiado optimista a la hora de hacer la planificación.

Se estimaron unas 58 horas, pero al final se emplearon 44,5. Todas las tareas se completaron a excepción del despliegue de la aplicación en el entorno web, debido a unos problemas con las compilaciones, y de las 10 horas que sobreestime para la memoria.

\subsection{Sprint 4 (07/07/20 - 10/07/20)}\label{sprint-4-070720---100720}
La duración de este \emph{Sprint} es de un día menor, porque coincidía el cierre de este en sábado. Por lo que se pasa de los cinco días de duración normal, a cuatro. Lo que se plantea es tener el juego terminado además de añadir un chat que aporte valor añadido.

Las pretensiones para este \emph{sprint} son:
\begin{itemize}
	\item Actualizar el contenido de la \emph{Play Store}
	\item Reunión de seguimiento el viernes 10 julio.
	\item Control del turno en el juego online.
	\item Colocación correcta de la ficha.
	\item Determinar cuando se produce el fin del cuatro en raya.
	\item Test de que funciona el juego online correctamente.
	\item Mejoras generales en el rendimiento.
	\item Indentar y elimnar los warnings del código.
	\item Capacidad de mandar mensajes entre los jugadores.
	\item Reunión con amigo para el poster.
	\item Resolución de algunos problemas.
\end{itemize}

Las diferentes \emph{issues} se encuentran en \href{https://github.com/scc0034/flutter_serpiente/milestone/4?closed=1}{Sprint 4}

\imagen{burndowns/sp4.png}{Sprint 4.}

Para el cierre el total de las tareas fueron completadas, se planificaron 41 horas, destinando 33 horas para el desarrollo esperado.

\section{Estudio de viabilidad}

Es esta parte se pretende analizar el coste / beneficio, como el apartado legal, en todo el proceso de desarrollo, en el caso de que se hubiera tenido que realizar en un entorno real. 


\subsection{Viabilidad económica}
La estructura de mi trabajo, es la de un proyecto con precio cerrado, es decir, no soy un trabajador asalariado, sino autónomo, que recibe un encargo, en este caso por parte de la Universidad. La definición que encaja para esto es la de \emph{freelancer}~\cite{noauthor_freelancercom_2020}. Por lo que el coste dependerá de la estimación inicial de las horas del proyecto, incluyendo un porcentaje de beneficios. En mi caso la estimación inicial de las horas fue de 250 horas.

Otra de las vías para obtener ingresos es mediante los anuncios que nos ofrece \emph{Google Ad}, a través de diferentes tipos de \emph{banners} y videos, con los que tener un retorno de dinero. Ya que la idea es que la aplicación este disponible de manera gratuita, en la \emph{play store} para todos aquellos que se la quieran descargar. Aunque esto este disponible, para contabilizar los costes es algo despreciable, ya que es complicado tener una gran repercusión en las primeras etapas de proyecto, o incluso una vez finalizado. 	

\subsubsection{Coste hardware}
Se desglosa el coste de los dispositivos usados para la implementación, suponiendo que la amortización del pc de sobremesa es aproximadamente de 5 años y de 2 años para el \emph{smartphone}, con la duración del proyecto de 1 mes.

\begin{table}[H]
	\begin{center}
		\begin{tabular}{ccc}
			\hline
			Concepto                        & Coste (€) & Coste amortización (€) \\ \hline
			PC sobremesa				    & 1200      & 20						\\
			Dispositivo móvil			    & 450       & 18,75						\\ \hline
			Coste total            	 		&\multicolumn{2}{c} {38,75}				\\ \hline
		\end{tabular}
	\caption{Coste hardware}
	\label{table:costehw}
	\end{center}
\end{table}

\subsubsection{Coste software}
El coste de los librerías, \emph{cloud services}, entornos de desarrollo, licencias, cursos, máquinas virtuales, entre otros, han sido de uso gratuito, dando lugar a un coste software de 0 euros.

\subsubsection{Coste personal}
El proyecto fue llevado por un solo trabajador, que se encargaba del desarrollo de software y la planificación. El número de horas inicialmente pensado fue de 250 horas, siendo este trabajador autónomo. Se considera el siguiente salario:

\begin{table}[H]
	\begin{center}
		\begin{tabular}{cccc}
			\hline
			Concepto                        & Precio €/h	& horas		& Coste (€)  	\\ \hline
			Freelancer					    & 20      		& 250		& 5000			\\ \hline
	
		\end{tabular}
		\caption{Coste personal}
		\label{table:costepersonal}
	\end{center}
\end{table}

En lo referente a las cuotas de la seguridad social, para el año 2020, tenemos que la cuota mínima a pagar es el resultado de aplicar el 30,3\% al salario mínimo interporfesional, que es de 944,4 €, dando lugar a que esta cuota sea de 286,15 €. Dependiendo de la contingencia el desglose es:

\begin{table}[H]
	\begin{center}
		\begin{tabular}{ll}
			\hline
			Concepto                        	& Coste (€) \\ \hline
			Salario bruto del trabajador    	& 944,4      \\
			Contingencias comunes (28,3 \%) 	& 283,2     \\
			Contingencias profesionales (1,1 \%) & 10,38     \\
			Cese de actividad (0,8 \%)          & 7,55        \\
			Formación profesional (0,1 \%)  & 0,94       \\ \hline
			Coste cuota				            & 286,15 
		\end{tabular}
	\caption{Coste cuota de la seguridad social}
	\label{table:costecuota}
	\end{center}
\end{table}

Finalmente vemos que el coste del empleado para este proyecto es de 5286,15 €.

\subsubsection{Costes varios}
Otros costes que también se deben de tener en cuenta en el proyecto

\begin{table}[H]
	\begin{center}
		\begin{tabular}{cc}
			\hline
			Concepto                        & Coste (€)  	\\ \hline
			Internet					    & 50     		\\
			Cuenta Google Play				& 25			\\ \hline
			Coste total            	 		&75			\\ \hline
		\end{tabular}
		\caption{Coste vario}
		\label{table:costevario}
	\end{center}
\end{table}

\subsubsection{Coste total proyecto}
El coste total del proyecto es la suma de los costes anteriores, que nos da un importe de 5399,9 €, a esto le tenemos que aplicar el correspondiente incremento del impuesto de valor añadido, que es~\cite{noauthor_freelancercom_2020} del 21\%, por lo que el coste total del proyecto es de 6533,9 €.

\subsubsection{Beneficios}
La idea es que la aplicación se distribuya de manera gratuita a través de la cuenta de \emph{Google Play}, tiene publicidad pero al comienzo de arrancar los beneficios que retornará serán prácticamente nulos.

Por lo que la vía de obtener ingresos como freelance, puede ser incrementar el coste del proyecto por un 15\%, de tal manera que nos podamos asegurar ese beneficio, además de garantizarnos ante un incremento de las horas planificadas, seguir teniendo ese margen de beneficio.

El nuevo coste total del proyecto sería entonces de 6209,89 €, que añadiendo el impuesto de valor añadido, se queda en 7513,96 €.

\subsection{Viabilidad legal}

Para el completar el proyecto han sido necesarias gran multitud de herramientas,a continuación, en la tabla \ref{tabla:Licencias}, se expondrán las principales que fueron utilizadas.


\begin{table}[H]
	
	\rowcolors {2}{gray!35}{}
	\begin{tabular}{l l l l}
		\toprule
		Librería     & Versión & Descripción                                                     & Licencia                \\ 	\midrule	
		VsCode        & 1.46.1  & \begin{tabular}[c]{@{}l@{}}Editor de código.\\  \end{tabular} & MIT\\ 
		Android Studio & 	4.0 & \begin{tabular}[c]{@{}l@{}}App virtualización \\del SO Android.\\  \end{tabular} & Apache 2.0\\
		Android R  & 10.0+ Api 30 & \begin{tabular}[c]{@{}l@{}}Versión del S.O \\virtualizado.\\  \end{tabular} & Apache 2.0\\
		Flutter    & 1.17    & \begin{tabular}[c]{@{}l@{}}Framework usado en\\ desarollar la app\end{tabular}                     
		& BSD 3-Clause \\
		Dart    & 2.2.0    & \begin{tabular}[c]{@{}l@{}}Lenguaje prog.\\ desarrollado por Google\end{tabular}                     
		& BSD \\
		Node.js    & 12.18    & \begin{tabular}[c]{@{}l@{}}Uso de npm\\ \end{tabular}                     
		& MIT \\
		Firebase console    & 5.5    & \begin{tabular}[c]{@{}l@{}}Herramienta de Google\\ gestión sercios.\end{tabular}                     
		& Gratis \\
		Play Sotre console    & --    & \begin{tabular}[c]{@{}l@{}}Backend developers\\ tienda apps\end{tabular}                     
		& \begin{tabular}[c]{@{}l@{}}Licencia \\ pagada\end{tabular}  \\
		Admob services    & --    & \begin{tabular}[c]{@{}l@{}}Herramienta publicidad\\\end{tabular}                     
		& Gratis \\ \bottomrule
	\end{tabular}
	\caption{Licencias de bibliotecas y herramientas utilizadas}
	\label{tabla:Licencias}
\end{table}

Aclarar que de las herramientas anteriores, las dos que aparecen como licencia gratuita, es debido a la escalabilidad de aplicación. Hace referencia que a partir de una cantidad de usuarios/consultas tienes que pagar por el servicio para el caso de firebase console. Para el caso de admob, depende del número de clicks en los anuncios, impuestos y regulaciones varias, por lo que en mi caso, es una aplicación pequeña, siendo el servicio gratuito con los beneficios para Google.

\subsubsection{Imágenes y material gráfico}

\begin{table}[H]
	\begin{center}
		\begin{tabular}{ccc}
			\hline
			Fuente                        & Descripción & Licencia  	\\ \hline
			Giphy					    & Repositorio de contenido visual  & Open Source   		\\\hline

		\end{tabular}
		\caption{Fuente del contenido audiovisual}
		\label{table:fuenteimagenes}
	\end{center}
\end{table}

\subsection{Música y sonido}

\begin{table}[H]
	\begin{center}
		\begin{tabular}{ccc}
			\hline
			Fuente                        & Descripción & Licencia  	\\ \hline
			~\href{https://www.zapsplat.com/}{Freesounds}				    & Repositorio musical visual  & CC0 Public Domain   		\\\hline
			
		\end{tabular}
		\caption{Fuente del contenido audiovisual}
		\label{table:fuentesonido}
	\end{center}
\end{table}

\subsection{Herramientas}
En FLutter son conocidos como \emph{packages}, paquetes que ofrecen funcionalidades que ya han sido implementadas, todas ellas se pueden encontrar en la siguiente \href{https://pub.dev/}{web}. Estos se integran en el fichero pubspec.yaml. En este caso se usaron: 


\begin{table}[H]
	
	\rowcolors {2}{gray!35}{}
	\begin{tabular}{l l l l}
		\toprule
		Librería     & Versión & Descripción                                                     & Licencia                \\ 	\midrule	
		shared preferences        & 0.5.6  & \begin{tabular}[c]{@{}l@{}}Persistencia datos.\\  \end{tabular} & BSD\\ 
		flutter email sender & 	3.0.1 & \begin{tabular}[c]{@{}l@{}}Envio correos\\  \end{tabular} & Apache 2.0\\
		url launcher  & 5.4.9 & \begin{tabular}[c]{@{}l@{}}Abrir navegador.\\  \end{tabular} & Apache 2.0\\
		flutter phone state    & 0.5.9    & \begin{tabular}[c]{@{}l@{}}Abrir app llamadas\end{tabular}                     
		& MIT \\
		sqflite    & 1.3.0    & \begin{tabular}[c]{@{}l@{}}BD local\end{tabular}                     
		& MIT \\
		path    & 1.6.4    & \begin{tabular}[c]{@{}l@{}}Rutas \end{tabular}                     
		& BSD \\
		
		firebase auth   & 0.16.1    & \begin{tabular}[c]{@{}l@{}}Conectar con firebase\end{tabular}                     
		& BSD \\
		google sign in   & 4.5.1    & \begin{tabular}[c]{@{}l@{}}Sign in Google\end{tabular}                     
		& BSD \\
		firebase core   & 0.4.5    & \begin{tabular}[c]{@{}l@{}}API firebase moviles\end{tabular}                     
		& BSD \\
		firebase core web   & 0.1.1+2    & \begin{tabular}[c]{@{}l@{}}API web\end{tabular}                     
		& BSD \\
		firebase admob   & 0.9.3+2    & \begin{tabular}[c]{@{}l@{}}Integración publicidad\end{tabular}                     
		& BSD \\ 
		cloud firestore   & 0.13.7    & \begin{tabular}[c]{@{}l@{}}Cloud firestore\end{tabular}                     
		& BSD \\
		audioplayers   & 0.15.1    & \begin{tabular}[c]{@{}l@{}}Reproductor musical\end{tabular}                     
		& MIT \\
		flutter share me   & 0.9.1    & \begin{tabular}[c]{@{}l@{}}Shared \end{tabular}                     
		& Apache 2.0 \\
		bubble   & 1.1.9+1    & \begin{tabular}[c]{@{}l@{}}Chat\end{tabular}                     
		& BSD \\
		provider   & 2.0.1   & \begin{tabular}[c]{@{}l@{}}Herramienta integración\end{tabular}                     
		& MIT \\
		
		\bottomrule
	\end{tabular}
	\caption{Licencias de bibliotecas y herramientas utilizadas}
	\label{tabla:paquetes}
\end{table}

\subsection{Licencia aplicación}
Estudiando las compatibilidades con el total de las licencias, donde más problemas encontramos es con la licencia Apache 2.0, ya que es de las más restrictivas. No me impide la comercialización (free-to-play), que es justo lo que quiero, pero en el caso de que modifique el código fuente de algunas de las herramientas, si que tendría más problemas,pero no, ya que solo las uso.

Revisando los juegos, hay que detenerse en:

\begin{itemize}
	\item \textbf{Derecho de autor o \emph{Copyright}}: no se infringe, ya que este protege el código fuente, aplicación y recursos artísticos cosa que se han hecho desde cero, como obra nueva.
	\item \textbf{Propiedad industrial}: no se infringe, no hay patentes encontradas. 
	\item \textbf{Trademark:} sin problema, no se puede apropiar de la palabra serpiente / snake o cuatro en raya, por lo que se puede llamar así.
\end{itemize}

Por lo tanto el trabajo final de grado tiene:
 						
\textbf{Licencia MIT (Massachusetts Institute Technology) siendo una licencia de uso libre y permitiendo su uso comercial y modificación.}




